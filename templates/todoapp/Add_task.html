{% extends 'base.html' %}
{% block title %}Tasks{% endblock %}

{% block content %}
<h2>Task Manager</h2>

<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Add Task</button>
</form>

{% if tasks %}
<h2>Your Tasks</h2>

{% if tasks_pending %}
<h3>ðŸ•’ Pending Tasks</h3>
<ul style="list-style-type: none; padding: 0;">
    {% for task in tasks_pending %}
    <li style="
        background: #fff8e1;
        margin: 6px 0;
        padding: 10px 14px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    ">
        <span>{{ task.title }}</span>

        <div style="display: flex; gap: 8px; align-items: center;">
            <a href="{% url 'update' task.id %}" 
               style="background:#dc3545; color:white; padding:6px 12px; border-radius:6px; text-decoration:none; transition:0.2s;">
               Edit
            </a>
            <form method="POST" action="{% url 'delete' task.id %}" style="margin: 0;">
                {% csrf_token %}
                <button type="submit" style="
                    background-color: #007bff;
                    color: white;
                    border: none;
                    padding: 6px 12px;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: 0.2s;
                ">Delete</button>
            </form>
        </div>
    </li>
    {% empty %}
    <li>No pending tasks!</li>
    {% endfor %}
</ul>
{% endif %}

{% if tasks_completed %}
<h3>âœ… Completed Tasks</h3>
<ul style="list-style-type: none; padding: 0;">
    {% for task in tasks_completed %}
    <li style="
        background: #d4edda;
        margin: 6px 0;
        padding: 10px 14px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    ">
        <span>{{ task.title }}</span>

        <div style="display: flex; gap: 8px; align-items: center;">
            <a href="{% url 'update' task.id %}" 
               style="background:#28a745; color:white; padding:6px 12px; border-radius:6px; text-decoration:none; transition:0.2s;">
               Edit
            </a>
            <form method="POST" action="{% url 'delete' task.id %}" style="margin: 0;">
                {% csrf_token %}
                <button type="submit" style="
                    background-color: #6c757d;
                    color: white;
                    border: none;
                    padding: 6px 12px;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: 0.2s;
                ">Delete</button>
            </form>
        </div>
    </li>
    {% empty %}
    <li>No completed tasks!</li>
    {% endfor %}
</ul>
{% endif %}
{% else %}
<p>No tasks yet!</p>
{% endif %}

<a href="{% url 'logout' %}" class="link"
    style="background:#dc3545; color:white; padding:8px; border-radius:6px; text-decoration:none;">
    Logout
</a>
{% endblock %}
